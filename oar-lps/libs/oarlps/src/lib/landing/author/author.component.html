<div style="display: table;">
    <div class="editable_container">
        <!-- Always display the label in edit mode -->
        <div class="editable_field" *ngIf="!record['authors'] || record['authors'].length==0 || mdupdsvc.isEditMode">
            <div class="editable_field" *ngIf="mdupdsvc.isEditMode" [ngStyle]="mdupdsvc.getFieldStyle(fieldName, false, undefined, false)">
                Authors:
            </div>
        </div>

        <div *ngIf="record['authors'] && record['authors'].length > 0" class="editable_field" style="white-space: nowrap;width: fit-content;" [ngStyle]="mdupdsvc.getFieldStyle(fieldName, false, undefined, false)">
            <div class="authorsbrief">
                <span *ngFor="let author of record.authors; let i = index">
                    {{ author.fn }}    
                    <span *ngIf="author.orcid">
                        <a href="https://orcid.org/{{ author.orcid }}" target="blank">
                            <img src="assets/images/orcid-logo.png" style="width: 20px;">
                        </a>
                    </span>                            
                    <span *ngIf="i < record.authors.length-1 ">,</span>
                </span>
                <span>
                    <i style="margin-left: 0.5rem;" class="faa"
                    [ngClass]="{'faa-caret-right': !clickAuthors, 'faa-caret-down': clickAuthors}"
                    aria-label="Show author details"
                    (click)="isCollapsedContent = !isCollapsedContent; clickAuthors = expandClick();"></i>
                </span>
            </div>
            <div [collapse]="!isCollapsedContent" class="card card-block card-header customcard" style="width: fit-content; padding:.5em;">
                <div class="authorsdetail" *ngIf="record.authors">
                    <span><b>Authors:</b></span>
                    <div *ngFor="let author of record.authors; let i = index">
                    <div>
                        <span>{{ author.fn}}</span>
                        <span *ngIf="author.orcid">&nbsp;&nbsp;&nbsp;&nbsp;
                        <a href="https://orcid.org/{{ author.orcid }}" target="blank">
                            <img src="assets/images/orcid-logo.png" style="width: 20px;">:
                            {{ author.orcid }}
                        </a>
                        </span>                            
                        </div>
                        <div *ngFor="let aff of author.affiliation" style="padding-left: 1em">
                            <i>
                            <div>{{aff.title}}</div>
                            <div *ngIf="aff.subunits">{{getSubunites(aff.subunits)}}</div>
                            </i>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <!-- Control buttons -->
        <div class="editable_field" *ngIf="mdupdsvc.isEditMode" style="white-space: nowrap;">
            <i class="faa faa-pencil icon_enabled" [ngClass]="{'icon_enabled': !isEditing, 'icon_disabled':isEditing }" (click)="startEditing()" *ngIf="mdupdsvc.isEditMode" title="Edit title" ngbTooltip="edit title" aria-label="edit title" [ngStyle]="{'cursor': isEditing? 'default' : 'pointer' }"></i>
        </div>
    </div>
</div>

<!-- Author editor -->
<div *ngIf="mdupdsvc.isEditMode" [@editExpand]="editBlockStatus" style = "width: 100%;" [style.overflow] = "overflowStyle">
    <lib-author-list [record]="record" (dataChanged)="onAuthorChange($event)"></lib-author-list>
</div>