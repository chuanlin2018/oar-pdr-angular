<div style="display: table;" *ngIf="record">
    <span *ngIf="record.version" style="padding-right: 10pt;"> Version: <strong>{{major}}.{{minor}}.{{patch}}</strong></span>

    <!-- Control buttons -->
    <div class="editable_field" *ngIf="mdupdsvc.isEditMode" style="white-space: nowrap;">
        <button class="edit_button" *ngIf="!isEditing" type="button" 
        (click)="startEditing()" aria-label="Edit version" ngbTooltip="Edit version" style="cursor: pointer">
            <i class="fas fa-pencil fa-sm"></i>
        </button> 
        
        <button class="edit_button" type="button" [disabled]="!updated" *ngIf="!isEditing && updated" 
            (click)="restoreOriginal()" aria-label="Restore button" ngbTooltip="Restore original version">
            <i class="fas fa-undo" data-toggle="tooltip" title="Undo version"></i>
        </button>           
    </div>


    <span class="" *ngIf="record.versionHistory" style="padding-right: 15pt;">...
        <i style="cursor: pointer;" class="faa" aria-hidden="true"
            [ngClass]="{'faa-caret-right': !clickHistory, 'faa-caret-down': clickHistory}"
            (click)="closeHistory = !closeHistory; clickHistory = expandHistory();"></i>
    </span>

    <!-- Info button -->
    <i class="fas fa-info-circle link-icon" (click)="refreshHelpText()" title="About version" ngbTooltip="About version" style="cursor: pointer;margin-right: 10px;"></i> 

    <!-- Releases, Last modified and creators -->
    <span class="" *ngIf="record.issued" style="padding-right: 10pt;"> Released:
        <strong>{{record.issued.slice(0,10)}}</strong></span>
    <span class="" *ngIf="record.modified" style="padding-right: 10pt;"> Last modified:
        <strong>{{record.modified.slice(0,10)}}</strong></span>

    <!-- Version history -->
    <div class="card customcard" [collapse]="!closeHistory">
        <b>Version History:</b>
        <span *ngFor="let release of record.versionHistory">
            <br> <b [innerHTML]="renderRelVer(release, record.version)"></b> &nbsp;&nbsp;
            <span *ngIf="release.issued">Released: {{release.issued}}</span>
            <span *ngIf="release.location || release.refid"> &nbsp;&nbsp;
                <i [innerHTML]="renderRelId(release, record.version)"></i>
            </span>
            <span *ngIf="release.description"> <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <i>{{release.description}}</i>
            </span>
        </span>
    </div>
    <p style="margin-top: 10px;" *ngIf="newer && newer.location">
        <b>There is a more recent release of this resource available: &nbsp;&nbsp;
            <a href="{{newer.location}}"
                (click)="gaService.gaTrackEvent('outbound', $event, 'Resource title: ' + record.title, newer.label)">{{newer.label}}</a></b>
    </p>
</div>

<!-- Version editor -->
<div class="editable_container" style="width: 100%;" [@editExpand]="editBlockStatus" [style.overflow] = "overflowStyle">
    <div class="editable_field">
        <p-inputNumber [inputStyle]="{width: '30px'}" [(ngModel)]="major" mode="decimal" [showButtons]="true" inputId="minmax-buttons" [(min)]="originalMajor" [max]="1000" (onInput)="onMajorChanged($event)">
        </p-inputNumber>
        .
        <p-inputNumber [inputStyle]="{width: '30px'}" [(ngModel)]="minor" mode="decimal" [showButtons]="true" inputId="minmax-buttons" [(min)]="originalMinor" [max]="1000" (onInput)="onMinorChanged($event)">
        </p-inputNumber>
        .
        {{patch}}
    </div>
    
    <!-- Control buttons -->
    <div class="editable_field" *ngIf="mdupdsvc.isEditMode" style="white-space: nowrap;">
        <button class="edit_button" type="button" (click)="onSave()" 
        aria-label="save button" ngbTooltip="Save changes">
            <i class="fas fa-check icon_enabled"></i>
        </button>
    
        <button class="edit_button" type="button" 
        (click)="cancelEditing()" aria-label="undo button" ngbTooltip="Cancel edit">
            <i class="fas fa-undo fa-sm" data-toggle="tooltip" title="Undo current changes"></i>
        </button>            
    </div>
</div>


