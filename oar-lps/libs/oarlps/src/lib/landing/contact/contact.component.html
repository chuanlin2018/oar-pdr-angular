<div style="display: table;margin: 10px 0px 0px 0px;padding: 0px;">
    <div class="editable_container">
        <!-- Display required field indicator -->
        <div class="editable_field" *ngIf="mdupdsvc.isEditMode">
            <span *ngIf="mdupdsvc.isEditMode" style="color: rgb(173, 0, 0);margin-left: -12px;margin-right: 6px;">*</span>
        </div>

        <!-- Label -->
        <div class="editable_field" *ngIf="mdupdsvc.isEditMode || hasContact">
            <span style="margin-right: 0.5em;">Contact:</span>
        </div>

        <!-- Has contact -->
        <!-- <div class="editable_field" *ngIf="hasContact" style="max-width:calc(100% - 4em);margin-left: 05em;border: 1px solid red;" [ngStyle]="mdupdsvc.getFieldStyle(fieldName, currentContact.dataChanged, undefined, false)"> -->
        <div class="editable_field" *ngIf="hasContact" style="max-width:calc(100% - 4em);">
            <div style="padding-right: 0.5em;">
                <strong>
                    <a *ngIf="hasEmail"
                        href="{{currentContact.hasEmail}}" target="_top">
                        {{currentContact.fn}}</a>
                    <span *ngIf="!hasEmail">{{currentContact.fn}}</span>
                </strong>.

                <i style="cursor: pointer;" class="faa"
                [ngClass]="{'faa-plus-square-o': !clickContact, 'faa-minus-square-o': clickContact}"
                aria-hidden="true"
                (click)="closeContent = !closeContent; clickContact=expandContact();"></i>

                <div [collapse]="!closeContent" class="card card-body bg-faded">
                    <span class="" *ngIf="currentContact.fn">
                        <span>{{currentContact.fn}}</span>
                    </span>
                    <span *ngIf="hasEmail">
                        <br><strong>Email:</strong>
                        <a *ngIf="hasEmail" href="{{currentContact.hasEmail}}"
                            target="_top">
                            {{email(currentContact.hasEmail)}}
                        </a>
                    </span>
                    <div *ngIf="currentContact.address">
                        <span><b>Address:</b></span>
                        <div *ngFor="let address of currentContact.address"
                            style="padding-left: 1em;">
                            {{address}}
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <i class="faa faa-pencil icon_enabled link-icon" [ngClass]="{'icon_enabled': !isEditing, 'icon_disabled':isEditing }" (click)="startEditing()" *ngIf="mdupdsvc.isEditMode" title="Edit contact" ngbTooltip="edit contact" aria-label="edit contact" [ngStyle]="{'cursor': isEditing? 'default' : 'pointer' }"></i>
 
    </div>
</div>

<!-- Contact editor -->
<div *ngIf="mdupdsvc.isEditMode" [@editExpand]="editBlockStatus" style = "width: 100%;max-width: 800px; margin: 0px;padding: 0px;" [style.overflow] = "overflowStyle">
    <table style="width: 100%;">
        <tr  style="width: 100%;">
            <!-- Text edit area -->
            <td class="edit-block" style="width: calc(100%-90px);">
                <lib-contact-edit [contact]="currentContact" [backgroundColor]="backgroundColor" [editMode]="editMode" [forceReset]="forceReset"></lib-contact-edit>
            </td>

            <!-- Control buttons -->
            <td style="width: 90px;vertical-align: top;">
                <!-- Save button -->
                <button class="edit_button" *ngIf="mdupdsvc.isEditMode" type="button" (click)="saveCurrentContact()" aria-label="edit button" [disabled]="!currentContact.dataChanged" ngbTooltip="Save contact">
                    <i class="faa faa-check"></i>
                </button>
        
                <!-- Cancel button -->
                <button class="edit_button" *ngIf="mdupdsvc.isEditMode" type="button"
                    (click)="undoCurContactChanges()" aria-label="undo button" ngbTooltip="Undo current changes">
                    <i class="faa faa-remove"></i>
                </button>

                <!-- Restore button -->
                <button class="edit_button" *ngIf="mdupdsvc.isEditMode" type="button"
                [disabled]="!updated"
                (click)="restoreOriginal()">
                    <i class="faa faa-undo"
                        [ngClass]="{'icon_enabled': updated, 'icon_disabled': !updated }"
                        data-toggle="tooltip" title="Undo contactPoint"></i>
                </button>                
            </td>          
        </tr>
    </table>
</div>