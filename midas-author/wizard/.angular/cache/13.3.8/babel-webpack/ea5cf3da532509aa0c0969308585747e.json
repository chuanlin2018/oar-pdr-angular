{"ast":null,"code":"import { StepModel } from \"./models/step.model\";\nimport { FormGroupDirective } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./services/step.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"./components/navigator/navigator.component\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"./components/pubtype/pubtype.component\";\nimport * as i6 from \"./components/contactinfo/contactinfo.component\";\nimport * as i7 from \"./components/files/files.component\";\nimport * as i8 from \"./components/softwareinfo/softwareinfo.component\";\nimport * as i9 from \"./components/associated-papers/associated-papers.component\";\n\nfunction StepWizardComponent_ng_container_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 11);\n    i0.ɵɵelement(2, \"app-pubtype\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"dataModel\", ctx_r0.dataModel)(\"steps\", ctx_r0.steps);\n  }\n}\n\nfunction StepWizardComponent_ng_container_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 13);\n    i0.ɵɵelement(2, \"app-contactinfo\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"dataModel\", ctx_r1.dataModel)(\"steps\", ctx_r1.steps);\n  }\n}\n\nfunction StepWizardComponent_ng_container_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 14);\n    i0.ɵɵelement(2, \"app-files\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"dataModel\", ctx_r2.dataModel)(\"steps\", ctx_r2.steps);\n  }\n}\n\nfunction StepWizardComponent_ng_container_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 15);\n    i0.ɵɵelement(2, \"app-softwareinfo\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"dataModel\", ctx_r3.dataModel)(\"steps\", ctx_r3.steps);\n  }\n}\n\nfunction StepWizardComponent_ng_container_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 16);\n    i0.ɵɵelement(2, \"app-associated-papers\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"dataModel\", ctx_r4.dataModel)(\"steps\", ctx_r4.steps);\n  }\n}\n\nexport let StepWizardComponent = /*#__PURE__*/(() => {\n  class StepWizardComponent {\n    constructor(stepService, fb, cdr) {\n      this.stepService = stepService;\n      this.fb = fb;\n      this.cdr = cdr;\n      this.steps = [];\n      this.currentStep = {};\n      this.dataModel = {};\n      this.onSoftware = false;\n      this.bodyHeight = 550;\n    }\n\n    ngOnInit() {\n      this.reset();\n      this.currentStepSub = this.stepService.getCurrentStep().subscribe(step => {\n        this.currentStep = step;\n      });\n      this.bodyHeight = window.innerHeight - 150;\n    }\n\n    formGroupReset() {\n      this.fgSteps = this.fb.group({\n        'pubtype': this.fb.group({\n          resourceType: [\"\"]\n        }),\n        'softwareInfo': this.fb.group({\n          provideLink: [false],\n          softwareLink: [\"\"]\n        }),\n        'contactInfo': this.fb.group({\n          creatorIsContact: [true],\n          contactName: [\"\"]\n        }),\n        'files': this.fb.group({\n          willUpload: [true]\n        }),\n        'assocPapers': this.fb.group({\n          assocPageType: [\"\"]\n        })\n      });\n    }\n\n    stepDataReset() {\n      this.steps = [];\n      this.steps = [new StepModel(1, 'Publication Type', true, true, false, false), new StepModel(2, 'Contact Info', true, false), new StepModel(3, 'Files', true, false), new StepModel(4, 'Optional', false, false), new StepModel(5, 'Associated Papers', true, false, false)];\n      this.currentStep = this.steps[0];\n      this.stepService.setSteps(this.steps);\n      this.stepService.setCurrentStep(this.currentStep);\n    }\n\n    reset() {\n      this.formGroupReset();\n      this.stepDataReset();\n      this.dataModel = {};\n    }\n\n    ngAfterViewInit() {\n      this.cdr.detectChanges();\n    }\n\n    onNextStep() {\n      if (!this.stepService.isLastStep()) {\n        this.stepService.moveToNextStep();\n      } else {\n        this.onSubmit();\n      }\n    }\n\n    get isFirstStep() {\n      return this.stepService.isFirstStep();\n    }\n\n    get isLastStep() {\n      return this.stepService.isLastStep();\n    }\n\n    onPrevStep() {\n      if (!this.isFirstStep) {\n        this.stepService.moveToPrevStep();\n      } else {\n        this.onSubmit();\n      }\n    }\n\n    showButtonLabel() {\n      // return \"continue\";\n      return !this.stepService.isLastStep() ? 'Next' : 'Finish';\n    }\n\n    ngOnDestroy() {\n      // Unsubscribe to avoid memory leaks and unexpected angular errors\n      this.currentStepSub.unsubscribe();\n    }\n\n    onSubmit() {// this.router.navigate(['/complete']);\n    }\n\n    onResize(event) {\n      // console.log(window.innerHeight)\n      this.bodyHeight = window.innerHeight - 150;\n    }\n\n    onCancel() {\n      this.reset();\n      this.steps = this.steps.slice(0);\n    }\n\n  }\n\n  StepWizardComponent.ɵfac = function StepWizardComponent_Factory(t) {\n    return new (t || StepWizardComponent)(i0.ɵɵdirectiveInject(i1.StepService), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef));\n  };\n\n  StepWizardComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: StepWizardComponent,\n    selectors: [[\"app-wizard\"]],\n    hostBindings: function StepWizardComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"resize\", function StepWizardComponent_resize_HostBindingHandler($event) {\n          return ctx.onResize($event);\n        }, false, i0.ɵɵresolveWindow);\n      }\n    },\n    features: [i0.ɵɵProvidersFeature([FormGroupDirective])],\n    decls: 20,\n    vars: 11,\n    consts: [[1, \"wiz-page-container\"], [3, \"steps\"], [1, \"step-page-container\"], [2, \"height\", \"100%\", 3, \"formGroup\"], [1, \"form-step\"], [3, \"ngSwitch\"], [4, \"ngSwitchCase\"], [1, \"bottom-control-container\"], [1, \"bottom-btn-container\"], [1, \"form-cancel-btn\", \"common-btn\", 3, \"click\"], [1, \"form-nav-btn\", \"common-btn\", 3, \"disabled\", \"click\"], [\"formGroupName\", \"pubtype\", 1, \"step-page\"], [3, \"dataModel\", \"steps\"], [\"formGroupName\", \"contactInfo\", 1, \"step-page\"], [\"formGroupName\", \"files\", 1, \"step-page\"], [\"formGroupName\", \"softwareInfo\", 1, \"step-page\"], [\"formGroupName\", \"assocPapers\", 1, \"step-page\"]],\n    template: function StepWizardComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\");\n        i0.ɵɵelement(2, \"wiz-navigator\", 1);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\", 2)(4, \"form\", 3)(5, \"div\", 4);\n        i0.ɵɵelementContainerStart(6, 5);\n        i0.ɵɵtemplate(7, StepWizardComponent_ng_container_7_Template, 3, 2, \"ng-container\", 6);\n        i0.ɵɵtemplate(8, StepWizardComponent_ng_container_8_Template, 3, 2, \"ng-container\", 6);\n        i0.ɵɵtemplate(9, StepWizardComponent_ng_container_9_Template, 3, 2, \"ng-container\", 6);\n        i0.ɵɵtemplate(10, StepWizardComponent_ng_container_10_Template, 3, 2, \"ng-container\", 6);\n        i0.ɵɵtemplate(11, StepWizardComponent_ng_container_11_Template, 3, 2, \"ng-container\", 6);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(12, \"div\", 7)(13, \"div\", 8)(14, \"button\", 9);\n        i0.ɵɵlistener(\"click\", function StepWizardComponent_Template_button_click_14_listener() {\n          return ctx.onCancel();\n        });\n        i0.ɵɵtext(15, \" Cancel \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"button\", 10);\n        i0.ɵɵlistener(\"click\", function StepWizardComponent_Template_button_click_16_listener() {\n          return ctx.onNextStep();\n        });\n        i0.ɵɵtext(17);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"button\", 10);\n        i0.ɵɵlistener(\"click\", function StepWizardComponent_Template_button_click_18_listener() {\n          return ctx.onPrevStep();\n        });\n        i0.ɵɵtext(19, \" Prev \");\n        i0.ɵɵelementEnd()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"steps\", ctx.steps);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"formGroup\", ctx.fgSteps);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngSwitch\", ctx.currentStep == null ? null : ctx.currentStep.stepIndex);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngSwitchCase\", \"1\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngSwitchCase\", \"2\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngSwitchCase\", \"3\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngSwitchCase\", \"4\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngSwitchCase\", \"5\");\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"disabled\", !(ctx.currentStep == null ? null : ctx.currentStep.canGoNext));\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate1(\" \", ctx.showButtonLabel(), \" \");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"disabled\", !(ctx.currentStep == null ? null : ctx.currentStep.canGoPrev));\n      }\n    },\n    directives: [i3.NavigatorComponent, i2.ɵNgNoValidate, i2.NgControlStatusGroup, i2.FormGroupDirective, i4.NgSwitch, i4.NgSwitchCase, i2.FormGroupName, i5.PubtypeComponent, i6.ContactinfoComponent, i7.FilesComponent, i8.SoftwareinfoComponent, i9.AssociatedPapersComponent],\n    styles: [\".wiz-page-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%;margin:auto}.step-page-container[_ngcontent-%COMP%]{flex:1;margin:20px auto;width:80%}.form-step[_ngcontent-%COMP%]{height:100%}.form-nav-btn[_ngcontent-%COMP%]{background-color:var(--nist-blue-default);color:#fff;margin:20px 0 0 20px;width:100px;height:40px;float:right;border-radius:5px;border:none}.form-nav-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed!important}.form-cancel-btn[_ngcontent-%COMP%]{background-color:var(--nist-blue-default);color:#fff;margin:20px 0 0 20px;width:100px;height:40px;float:left;border-radius:5px;border:none}.bottom-control-container[_ngcontent-%COMP%]{width:100%;height:80px;background-color:var(--background-light-grey)}.bottom-btn-container[_ngcontent-%COMP%]{margin:auto;width:80%}.main-content[_ngcontent-%COMP%]{max-width:100%;height:100%;margin:auto}.step-page[_ngcontent-%COMP%], .full-height[_ngcontent-%COMP%]{height:100%}\"]\n  });\n  return StepWizardComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}